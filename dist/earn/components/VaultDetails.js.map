{"version":3,"file":"VaultDetails.js","sources":["../../../src/earn/components/VaultDetails.tsx"],"sourcesContent":["'use client';\nimport { getTruncatedAmount } from '@/earn/utils/getTruncatedAmount';\nimport { Popover } from '@/internal/components/Popover';\nimport { Skeleton } from '@/internal/components/Skeleton';\nimport { etherscanSvg } from '@/internal/svg/etherscanSvg';\nimport { infoSvg } from '@/internal/svg/infoSvg';\nimport { background, border, cn, color, text } from '@/styles/theme';\nimport { TokenImage } from '@/token';\nimport { useRef } from 'react';\nimport { useState } from 'react';\nimport { useEarnContext } from './EarnProvider';\n\nfunction Row({ label, value }: { label: string; value: React.ReactNode }) {\n  return (\n    <div className=\"flex items-center justify-between gap-8\">\n      <div>{label}</div>\n      <div className=\"font-semibold\">{value}</div>\n    </div>\n  );\n}\n\nexport function VaultDetails() {\n  const [isOpen, setIsOpen] = useState(false);\n  const triggerRef = useRef<HTMLButtonElement>(null);\n  const anchorRef = useRef<HTMLDivElement>(null);\n  const { vaultToken, vaultName, deposits, liquidity, vaultAddress } =\n    useEarnContext();\n\n  if (!vaultToken || !vaultName) {\n    return <Skeleton className=\"!rounded-full h-7 min-w-28\" />;\n  }\n\n  return (\n    <div\n      ref={anchorRef}\n      className={cn(\n        text.label1,\n        color.foregroundMuted,\n        background.alternate,\n        'flex items-center justify-center gap-2 rounded-full p-1 px-3',\n      )}\n      data-testid=\"ock-vaultDetails\"\n    >\n      <TokenImage token={vaultToken} size={16} />\n      <span className=\"max-w-24 truncate\" title={vaultName}>\n        {vaultName}\n      </span>\n      <button\n        ref={triggerRef}\n        type=\"button\"\n        data-testid=\"ock-vaultDetailsButton\"\n        className={cn(\n          'size-3 [&_path]:fill-[var(--ock-icon-color-foreground-muted)] [&_path]:transition-colors [&_path]:ease-in-out [&_path]:hover:fill-[var(--ock-icon-color-foreground)]',\n          isOpen && '[&_path]:fill-[var(--ock-icon-color-foreground)]',\n        )}\n        onClick={() => setIsOpen(!isOpen)}\n      >\n        {infoSvg}\n      </button>\n\n      <Popover\n        isOpen={isOpen}\n        onClose={() => setIsOpen(false)}\n        position=\"bottom\"\n        align=\"start\"\n        trigger={triggerRef}\n        anchor={anchorRef.current}\n        offset={4}\n      >\n        <div\n          className={cn(\n            background.default,\n            color.foreground,\n            border.defaultActive,\n            background.default,\n            'flex min-w-40 flex-col gap-3 rounded-lg border p-3 text-sm',\n            'fade-in animate-in duration-200',\n          )}\n        >\n          <div className=\"font-semibold\">{vaultName}</div>\n          <div className=\"flex flex-col gap-2\">\n            <Row\n              label=\"Token\"\n              value={\n                <div className=\"flex items-center gap-1\">\n                  <TokenImage token={vaultToken} size={16} />\n                  <span className=\"max-w-24 truncate\">{vaultToken.symbol}</span>\n                </div>\n              }\n            />\n            {deposits ? (\n              <Row\n                label=\"Total deposits\"\n                value={`${getTruncatedAmount(deposits, 1, 'compact')} ${\n                  vaultToken.symbol\n                }`}\n              />\n            ) : null}\n            {liquidity ? (\n              <Row\n                label=\"Liquidity\"\n                value={`${getTruncatedAmount(liquidity, 1, 'compact')} ${\n                  vaultToken.symbol\n                }`}\n              />\n            ) : null}\n          </div>\n          <a\n            href={`https://basescan.org/address/${vaultAddress}`}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className={cn(\n              color.primary,\n              'flex max-w-fit items-center gap-1 hover:opacity-80',\n            )}\n            data-testid=\"ock-vaultDetailsBaseScanLink\"\n          >\n            <div>View on BaseScan</div>\n            <div className=\"h-3 w-3\">{etherscanSvg}</div>\n          </a>\n        </div>\n      </Popover>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}