{"version":3,"file":"YieldDetails.js","sources":["../../../src/earn/components/YieldDetails.tsx"],"sourcesContent":["'use client';\nimport { useEarnContext } from '@/earn/components/EarnProvider';\nimport { getTruncatedAmount } from '@/earn/utils/getTruncatedAmount';\nimport { Popover } from '@/internal/components/Popover';\nimport { Skeleton } from '@/internal/components/Skeleton';\nimport { infoSvg } from '@/internal/svg/infoSvg';\nimport { formatPercent } from '@/internal/utils/formatPercent';\nimport { background, border, cn, color, text } from '@/styles/theme';\nimport { useRef, useState } from 'react';\n\nfunction YieldInfo() {\n  const { rewards, nativeApy, vaultToken, vaultFee } = useEarnContext();\n  return (\n    <div\n      className={cn(\n        color.foregroundMuted,\n        border.defaultActive,\n        background.default,\n        'fade-in flex min-w-52 animate-in flex-col gap-2 rounded-lg border p-3 text-sm duration-200',\n      )}\n    >\n      {nativeApy ? (\n        <div\n          className=\"flex items-center justify-between gap-1\"\n          data-testid=\"ock-earnNativeApy\"\n        >\n          <div>{vaultToken?.symbol}</div>\n          <div className=\"font-semibold\">{formatPercent(nativeApy)}</div>\n        </div>\n      ) : null}\n\n      {rewards?.map((reward) => (\n        <div\n          key={reward.asset}\n          className=\"flex items-center justify-between gap-1\"\n          data-testid=\"ock-earnRewards\"\n        >\n          <div>{reward.assetName}</div>\n          <div className=\"font-semibold\">{formatPercent(reward.apy)}</div>\n        </div>\n      ))}\n\n      {vaultFee && nativeApy ? (\n        <div\n          className=\"flex items-center justify-between gap-1\"\n          data-testid=\"ock-earnPerformanceFee\"\n        >\n          <div>\n            Perf. Fee{' '}\n            <span className=\"text-xs\">({formatPercent(vaultFee, 0)})</span>\n          </div>\n          <div className=\"font-semibold\">\n            -{formatPercent(vaultFee * nativeApy)}\n          </div>\n        </div>\n      ) : null}\n    </div>\n  );\n}\n\nexport function YieldDetails() {\n  const [isOpen, setIsOpen] = useState(false);\n  const triggerRef = useRef<HTMLButtonElement>(null);\n  const anchorRef = useRef<HTMLDivElement>(null);\n\n  const { apy } = useEarnContext();\n\n  if (!apy) {\n    return <Skeleton className=\"!rounded-full h-7 min-w-28\" />;\n  }\n\n  return (\n    <div\n      ref={anchorRef}\n      className={cn(\n        text.label1,\n        color.foregroundMuted,\n        background.alternate,\n        'flex items-center justify-center gap-1 rounded-full p-1 px-3',\n      )}\n      data-testid=\"ock-yieldDetails\"\n    >\n      {`APY ${formatPercent(Number(getTruncatedAmount(apy.toString(), 4)))}`}\n      <button\n        ref={triggerRef}\n        type=\"button\"\n        data-testid=\"ock-apyInfoButton\"\n        className={cn(\n          'size-3 [&_path]:fill-[var(--ock-icon-color-foreground-muted)] [&_path]:transition-colors [&_path]:ease-in-out [&_path]:hover:fill-[var(--ock-icon-color-foreground)]',\n          isOpen && '[&_path]:fill-[var(--ock-icon-color-foreground)]',\n        )}\n        onClick={() => setIsOpen(!isOpen)}\n      >\n        {infoSvg}\n      </button>\n\n      <Popover\n        isOpen={isOpen}\n        onClose={() => setIsOpen(false)}\n        position=\"bottom\"\n        align=\"end\"\n        trigger={triggerRef}\n        anchor={anchorRef.current}\n        offset={4}\n      >\n        <YieldInfo />\n      </Popover>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}