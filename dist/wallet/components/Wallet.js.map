{"version":3,"file":"Wallet.js","sources":["../../../src/wallet/components/Wallet.tsx"],"sourcesContent":["'use client';\n\nimport { Draggable } from '@/internal/components/Draggable/Draggable';\nimport { useIsMounted } from '@/internal/hooks/useIsMounted';\nimport { useOutsideClick } from '@/internal/hooks/useOutsideClick';\nimport { useTheme } from '@/internal/hooks/useTheme';\nimport { findComponent } from '@/internal/utils/findComponent';\nimport { cn } from '@/styles/theme';\nimport {\n  Children,\n  type ReactNode,\n  isValidElement,\n  useMemo,\n  useRef,\n} from 'react';\nimport type { WalletReact } from '../types';\nimport { getWalletDraggableProps } from '../utils/getWalletDraggableProps';\nimport { ConnectWallet } from './ConnectWallet';\nimport { WalletAdvanced } from './WalletAdvanced';\nimport { WalletDropdown } from './WalletDropdown';\nimport { WalletProvider, useWalletContext } from './WalletProvider';\n\nconst defaultWalletChildren = (\n  <>\n    <ConnectWallet />\n    <WalletDropdown />\n  </>\n);\n\nexport function Wallet({\n  children,\n  className,\n  draggable,\n  draggableStartingPosition,\n  isSponsored,\n}: WalletReact) {\n  const componentTheme = useTheme();\n  const isMounted = useIsMounted();\n\n  // prevents SSR hydration issue\n  if (!isMounted) {\n    return null;\n  }\n\n  return (\n    <WalletProvider isSponsored={isSponsored}>\n      <WalletContent\n        className={cn(componentTheme, className)}\n        {...getWalletDraggableProps({ draggable, draggableStartingPosition })}\n      >\n        {children}\n      </WalletContent>\n    </WalletProvider>\n  );\n}\n\nfunction WalletContent({\n  children,\n  className,\n  draggable,\n  draggableStartingPosition,\n}: WalletReact) {\n  const {\n    isSubComponentOpen,\n    isConnectModalOpen,\n    handleClose,\n    connectRef,\n    breakpoint,\n  } = useWalletContext();\n  const walletContainerRef = useRef<HTMLDivElement>(null);\n\n  useOutsideClick(walletContainerRef, handleClose);\n\n  // Note: this can be removed after deprecating WalletAdvanced\n  const { dropdown, advanced } = useMemo(() => {\n    const childrenArray = Children.toArray(children);\n    return {\n      dropdown: childrenArray.find(findComponent(WalletDropdown)),\n      advanced: childrenArray.find(findComponent(WalletAdvanced)),\n    };\n  }, [children]);\n\n  // Note: this can be removed after deprecating WalletAdvanced\n  // cannot use advanced and dropdown,\n  // default to dropdown\n  const childrenToRender = useMemo(() => {\n    return Children.map(children, (child: ReactNode) => {\n      if (isValidElement(child) && child.type === WalletAdvanced && dropdown) {\n        return null;\n      }\n      return child;\n    });\n  }, [dropdown, children]);\n\n  // Note: this can be removed after deprecating WalletAdvanced\n  if (dropdown && advanced) {\n    console.error(\n      'Defaulted to WalletDropdown. Wallet cannot have both WalletDropdown and WalletAdvanced as children.',\n    );\n  }\n\n  // dragging should be disabled when the connect wallet modal is open\n  // or when the subcomponent is open on mobile (because then we use bottom sheet)\n  const disableDraggable =\n    isConnectModalOpen || (breakpoint === 'sm' && isSubComponentOpen);\n\n  if (draggable) {\n    return (\n      <div\n        ref={walletContainerRef}\n        className={cn('relative w-fit shrink-0', className)}\n      >\n        <Draggable\n          startingPosition={draggableStartingPosition}\n          disabled={disableDraggable}\n        >\n          <div ref={connectRef}>\n            {/* Note: update childrenToRender to children after deprecating WalletAdvanced */}\n            {childrenToRender || defaultWalletChildren}\n          </div>\n        </Draggable>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      ref={walletContainerRef}\n      className={cn('relative w-fit shrink-0', className)}\n    >\n      {/* Note: update childrenToRender to children after deprecating WalletAdvanced */}\n      <div ref={connectRef}>{childrenToRender || defaultWalletChildren}</div>\n    </div>\n  );\n}\n"],"names":["this"],"mappings":"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"}