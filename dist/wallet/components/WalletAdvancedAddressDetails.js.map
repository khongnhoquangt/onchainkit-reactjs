{"version":3,"file":"WalletAdvancedAddressDetails.js","sources":["../../../src/wallet/components/WalletAdvancedAddressDetails.tsx"],"sourcesContent":["'use client';\n\nimport { Avatar, Name } from '@/identity';\nimport { Spinner } from '@/internal/components/Spinner';\nimport { zIndex } from '@/styles/constants';\nimport { border, cn, color, pressable, text } from '@/styles/theme';\nimport { useCallback, useState } from 'react';\nimport { useWalletContext } from './WalletProvider';\nimport { usePortfolio } from '../hooks/usePortfolio';\nimport { RequestContext } from '@/core/network/constants';\nimport { useAccount } from 'wagmi';\n\ntype WalletAdvancedAddressDetailsProps = {\n  classNames?: {\n    container?: string;\n    avatar?: string;\n    nameButton?: string;\n    fiatBalance?: string;\n  };\n};\n\nexport function WalletAdvancedAddressDetails({\n  classNames,\n}: WalletAdvancedAddressDetailsProps) {\n  const { address, chain, animations } = useWalletContext();\n  const [copyText, setCopyText] = useState('Copy');\n\n  const handleCopyAddress = useCallback(async () => {\n    try {\n      await navigator.clipboard.writeText(String(address));\n      setCopyText('Copied');\n      setTimeout(() => setCopyText('Copy'), 2000);\n    } catch (err) {\n      console.error('Failed to copy address:', err);\n      setCopyText('Failed to copy');\n      setTimeout(() => setCopyText('Copy'), 2000);\n    }\n  }, [address]);\n\n  if (!address || !chain) {\n    return <div className=\"mt-1 h-28 w-10 px-4 py-3\" />; // Prevent layout shift\n  }\n\n  return (\n    <div\n      data-testid=\"ockWalletAdvanced_AddressDetails\"\n      className={cn(\n        'mt-2 flex w-88 flex-col items-center justify-center px-4 py-3',\n        color.foreground,\n        text.body,\n        animations.content,\n        classNames?.container,\n      )}\n    >\n      <Avatar\n        address={address}\n        chain={chain}\n        className={cn('pointer-events-none h-10 w-10', classNames?.avatar)}\n      />\n      <div className=\"group relative mt-2 text-base\">\n        <button\n          type=\"button\"\n          onClick={handleCopyAddress}\n          data-testid=\"ockWalletAdvanced_NameButton\"\n        >\n          <Name\n            address={address}\n            chain={chain}\n            className={cn(\n              'hover:text-[var(--ock-text-foreground-muted)] active:text-[var(--ock-text-primary)]',\n              classNames?.nameButton,\n            )}\n          />\n        </button>\n        <button\n          type=\"button\"\n          onClick={handleCopyAddress}\n          className={cn(\n            pressable.alternate,\n            text.legal,\n            color.foreground,\n            border.default,\n            border.radius,\n            zIndex.tooltip,\n            'absolute top-full right-0 mt-0.5 px-1.5 py-0.5 opacity-0 transition-opacity group-hover:opacity-100',\n          )}\n          aria-live=\"polite\"\n          data-testid=\"ockWalletAdvanced_NameTooltip\"\n        >\n          {copyText}\n        </button>\n      </div>\n      <AddressBalanceInFiat className={classNames?.fiatBalance} />\n    </div>\n  );\n}\n\nfunction AddressBalanceInFiat({ className }: { className?: string }) {\n  const { address } = useAccount();\n\n  const { data: portfolioData, isFetching: isFetchingPortfolioData } =\n    usePortfolio({ address }, RequestContext.Wallet);\n\n  const portfolioFiatValue = portfolioData?.portfolioBalanceInUsd;\n\n  const formattedValueInFiat = new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n  }).format(Number(portfolioFiatValue));\n\n  if (isFetchingPortfolioData) {\n    return (\n      <div className=\"mt-1 h-8 w-full\">\n        <Spinner />\n      </div>\n    );\n  }\n\n  if (portfolioFiatValue === null || portfolioFiatValue === undefined) {\n    return null;\n  }\n\n  return (\n    <div\n      className={cn(text.title1, 'mt-1 font-normal', className)}\n      data-testid=\"ockWalletAdvanced_AddressBalance\"\n    >\n      {formattedValueInFiat}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAqBO,SAAS,6BAA6B;AAAA,EAC3C;AACF,GAAsC;AACpC,QAAM,EAAE,SAAS,OAAO,WAAA,IAAe,iBAAA;AACvC,QAAM,CAAC,UAAU,WAAW,IAAI,SAAS,MAAM;AAE/C,QAAM,oBAAoB,YAAY,YAAY;AAChD,QAAI;AACF,YAAM,UAAU,UAAU,UAAU,OAAO,OAAO,CAAC;AACnD,kBAAY,QAAQ;AACpB,iBAAW,MAAM,YAAY,MAAM,GAAG,GAAI;AAAA,IAC5C,SAAS,KAAK;AACZ,cAAQ,MAAM,2BAA2B,GAAG;AAC5C,kBAAY,gBAAgB;AAC5B,iBAAW,MAAM,YAAY,MAAM,GAAG,GAAI;AAAA,IAC5C;AAAA,EACF,GAAG,CAAC,OAAO,CAAC;AAEZ,MAAI,CAAC,WAAW,CAAC,OAAO;AACtB,WAAO,uBAAC,OAAA,EAAI,WAAU,2BAAA,GAAf,QAAA,OAAA;AAAA,MAAA,UAAA;AAAA,MAAA,YAAA;AAAA,MAAA,cAAA;AAAA,IAAA,GAAA,IAA0C;AAAA,EACnD;AAEA,SACE;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,eAAY;AAAA,MACZ,WAAW;AAAA,QACT;AAAA,QACA,MAAM;AAAA,QACN,KAAK;AAAA,QACL,WAAW;AAAA,QACX,yCAAY;AAAA,MAAA;AAAA,MAGd,UAAA;AAAA,QAAA;AAAA,UAAC;AAAA,UAAA;AAAA,YACC;AAAA,YACA;AAAA,YACA,WAAW,GAAG,iCAAiC,yCAAY,MAAM;AAAA,UAAA;AAAA,UAHnE;AAAA,UAAA;AAAA,UAAA;AAAA,YAAA,UAAA;AAAA,YAAA,YAAA;AAAA,YAAA,cAAA;AAAA,UAAA;AAAA,UAAA;AAAA,QAAA;AAAA,QAKA,uBAAC,OAAA,EAAI,WAAU,iCACb,UAAA;AAAA,UAAA;AAAA,YAAC;AAAA,YAAA;AAAA,cACC,MAAK;AAAA,cACL,SAAS;AAAA,cACT,eAAY;AAAA,cAEZ,UAAA;AAAA,gBAAC;AAAA,gBAAA;AAAA,kBACC;AAAA,kBACA;AAAA,kBACA,WAAW;AAAA,oBACT;AAAA,oBACA,yCAAY;AAAA,kBAAA;AAAA,gBACd;AAAA,gBANF;AAAA,gBAAA;AAAA,gBAAA;AAAA,kBAAA,UAAA;AAAA,kBAAA,YAAA;AAAA,kBAAA,cAAA;AAAA,gBAAA;AAAA,gBAAA;AAAA,cAAA;AAAA,YAOA;AAAA,YAZF;AAAA,YAAA;AAAA,YAAA;AAAA,cAAA,UAAA;AAAA,cAAA,YAAA;AAAA,cAAA,cAAA;AAAA,YAAA;AAAA,YAAA;AAAA,UAAA;AAAA,UAcA;AAAA,YAAC;AAAA,YAAA;AAAA,cACC,MAAK;AAAA,cACL,SAAS;AAAA,cACT,WAAW;AAAA,gBACT,UAAU;AAAA,gBACV,KAAK;AAAA,gBACL,MAAM;AAAA,gBACN,OAAO;AAAA,gBACP,OAAO;AAAA,gBACP,OAAO;AAAA,gBACP;AAAA,cAAA;AAAA,cAEF,aAAU;AAAA,cACV,eAAY;AAAA,cAEX,UAAA;AAAA,YAAA;AAAA,YAfH;AAAA,YAAA;AAAA,YAAA;AAAA,cAAA,UAAA;AAAA,cAAA,YAAA;AAAA,cAAA,cAAA;AAAA,YAAA;AAAA,YAAA;AAAA,UAAA;AAAA,QAgBA,EAAA,GA/BF,QAAA,MAAA;AAAA,UAAA,UAAA;AAAA,UAAA,YAAA;AAAA,UAAA,cAAA;AAAA,QAAA,GAAA,IAgCA;AAAA,QACA,uBAAC,sBAAA,EAAqB,WAAW,yCAAY,YAAA,GAA7C,QAAA,OAAA;AAAA,UAAA,UAAA;AAAA,UAAA,YAAA;AAAA,UAAA,cAAA;AAAA,QAAA,GAAA,IAA0D;AAAA,MAAA;AAAA,IAAA;AAAA,IAhD5D;AAAA,IAAA;AAAA,IAAA;AAAA,MAAA,UAAA;AAAA,MAAA,YAAA;AAAA,MAAA,cAAA;AAAA,IAAA;AAAA,IAAA;AAAA,EAAA;AAmDJ;AAEA,SAAS,qBAAqB,EAAE,aAAqC;AACnE,QAAM,EAAE,QAAA,IAAY,WAAA;AAEpB,QAAM,EAAE,MAAM,eAAe,YAAY,wBAAA,IACvC,aAAa,EAAE,QAAA,GAAW,eAAe,MAAM;AAEjD,QAAM,qBAAqB,+CAAe;AAE1C,QAAM,uBAAuB,IAAI,KAAK,aAAa,SAAS;AAAA,IAC1D,OAAO;AAAA,IACP,UAAU;AAAA,EAAA,CACX,EAAE,OAAO,OAAO,kBAAkB,CAAC;AAEpC,MAAI,yBAAyB;AAC3B,WACE,uBAAC,OAAA,EAAI,WAAU,mBACb,iCAAC,SAAA,IAAD,QAAA,OAAA;AAAA,MAAA,UAAA;AAAA,MAAA,YAAA;AAAA,MAAA,cAAA;AAAA,IAAA,GAAA,IAAS,EAAA,GADX,QAAA,OAAA;AAAA,MAAA,UAAA;AAAA,MAAA,YAAA;AAAA,MAAA,cAAA;AAAA,IAAA,GAAA,IAEA;AAAA,EAEJ;AAEA,MAAI,uBAAuB,QAAQ,uBAAuB,QAAW;AACnE,WAAO;AAAA,EACT;AAEA,SACE;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,WAAW,GAAG,KAAK,QAAQ,oBAAoB,SAAS;AAAA,MACxD,eAAY;AAAA,MAEX,UAAA;AAAA,IAAA;AAAA,IAJH;AAAA,IAAA;AAAA,IAAA;AAAA,MAAA,UAAA;AAAA,MAAA,YAAA;AAAA,MAAA,cAAA;AAAA,IAAA;AAAA,IAAA;AAAA,EAAA;AAOJ;"}