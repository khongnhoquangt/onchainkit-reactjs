{"version":3,"file":"WalletAdvancedTokenHoldings.js","sources":["../../../src/wallet/components/WalletAdvancedTokenHoldings.tsx"],"sourcesContent":["'use client';\n\nimport { cn, color, text } from '@/styles/theme';\nimport { type Token, TokenImage } from '@/token';\nimport { formatUnits } from 'viem';\nimport { useWalletContext } from './WalletProvider';\nimport { usePortfolio } from '../hooks/usePortfolio';\nimport { RequestContext } from '@/core/network/constants';\nimport { useAccount } from 'wagmi';\n\ntype WalletAdvancedTokenDetailsProps = {\n  token: Token;\n  tokenImageSize?: number;\n  balance: number;\n  valueInFiat: number;\n  classNames?: {\n    container?: string;\n    tokenImage?: string;\n    tokenName?: string;\n    tokenBalance?: string;\n    fiatValue?: string;\n  };\n};\n\ntype WalletAdvancedTokenHoldingsProps = {\n  classNames?: {\n    container?: string;\n    tokenDetails?: WalletAdvancedTokenDetailsProps['classNames'];\n  };\n};\n\nexport function WalletAdvancedTokenHoldings({\n  classNames,\n}: WalletAdvancedTokenHoldingsProps) {\n  const { address } = useAccount();\n  const { animations } = useWalletContext();\n\n  const { data: portfolioData, isFetching: isFetchingPortfolioData } =\n    usePortfolio({ address }, RequestContext.Wallet);\n\n  const tokenBalances = portfolioData?.tokenBalances;\n\n  if (isFetchingPortfolioData || !tokenBalances || tokenBalances.length === 0) {\n    return (\n      <div\n        data-testid=\"ockWalletAdvanced_LoadingPlaceholder\"\n        className=\"mx-auto my-2 h-44 w-80 px-4 py-3\"\n      />\n    ); // Prevent layout shift\n  }\n\n  return (\n    <div\n      className={cn(\n        'flex flex-col items-center gap-4',\n        'my-2 h-44 max-h-44',\n        'scrollbar-hidden w-88 overflow-y-auto px-4 py-3',\n        animations.content,\n        classNames?.container,\n      )}\n      data-testid=\"ockWalletAdvanced_TokenHoldings\"\n    >\n      {tokenBalances.map((tokenBalance, index) => (\n        <TokenDetails\n          key={`${tokenBalance.address}-${index}`}\n          token={{\n            address: tokenBalance.address,\n            chainId: tokenBalance.chainId,\n            decimals: tokenBalance.decimals,\n            image: tokenBalance.image,\n            name: tokenBalance.name,\n            symbol: tokenBalance.symbol,\n          }}\n          balance={Number(\n            formatUnits(\n              BigInt(tokenBalance.cryptoBalance),\n              tokenBalance.decimals,\n            ),\n          )}\n          valueInFiat={Number(tokenBalance.fiatBalance)}\n          classNames={classNames?.tokenDetails}\n        />\n      ))}\n    </div>\n  );\n}\n\nfunction TokenDetails({\n  token,\n  balance,\n  valueInFiat,\n  classNames,\n  tokenImageSize = 32,\n}: WalletAdvancedTokenDetailsProps) {\n  const formattedBalance = new Intl.NumberFormat('en-US', {\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 5,\n  }).format(balance);\n\n  const formattedValueInFiat = new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n  }).format(valueInFiat);\n\n  return (\n    <div\n      className={cn(\n        'flex w-full flex-row items-center justify-between',\n        classNames?.container,\n      )}\n    >\n      <div\n        data-testid=\"ockWalletAdvanced_TokenDetails_TokenImage\"\n        className={cn(\n          'flex flex-row items-center gap-2',\n          classNames?.tokenImage,\n        )}\n      >\n        <TokenImage token={token} size={tokenImageSize} />\n        <div className=\"flex flex-col\">\n          <span\n            className={cn(\n              text.label1,\n              color.foreground,\n              'max-w-52 overflow-hidden text-ellipsis whitespace-nowrap text-left',\n              classNames?.tokenName,\n            )}\n          >\n            {token.name?.trim()}\n          </span>\n          <span\n            className={cn(\n              text.legal,\n              color.foregroundMuted,\n              classNames?.tokenBalance,\n            )}\n          >\n            {`${formattedBalance} ${token.symbol}`}\n          </span>\n        </div>\n      </div>\n      <span\n        className={cn(\n          text.label2,\n          color.foregroundMuted,\n          classNames?.fiatValue,\n        )}\n      >\n        {formattedValueInFiat}\n      </span>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}