{"version":3,"file":"buildSendTransaction.js","sources":["../../src/api/buildSendTransaction.ts"],"sourcesContent":["import { encodeFunctionData, erc20Abi } from 'viem';\nimport type {\n  BuildSendTransactionParams,\n  BuildSendTransactionResponse,\n} from './types';\n\nexport function buildSendTransaction({\n  recipientAddress,\n  tokenAddress,\n  amount,\n}: BuildSendTransactionParams): BuildSendTransactionResponse {\n  // if no token address, we are sending native ETH\n  // and the data prop is empty\n  if (!tokenAddress) {\n    return {\n      to: recipientAddress,\n      data: '0x',\n      value: amount,\n    };\n  }\n\n  try {\n    const transferCallData = encodeFunctionData({\n      abi: erc20Abi,\n      functionName: 'transfer',\n      args: [recipientAddress, amount],\n    });\n    return {\n      to: tokenAddress,\n      data: transferCallData,\n    };\n  } catch (error) {\n    const message = error instanceof Error ? error.message : String(error);\n    return {\n      code: 'AmBSeTx01', // Api Module Build Send Transaction Error 01\n      error: message,\n      message: 'Could not build transfer transaction',\n    };\n  }\n}\n"],"names":[],"mappings":";AAMO,SAAS,qBAAqB;AAAA,EACnC;AAAA,EACA;AAAA,EACA;AACF,GAA6D;AAG3D,MAAI,CAAC,cAAc;AACjB,WAAO;AAAA,MACL,IAAI;AAAA,MACJ,MAAM;AAAA,MACN,OAAO;AAAA,IAAA;AAAA,EAEX;AAEA,MAAI;AACF,UAAM,mBAAmB,mBAAmB;AAAA,MAC1C,KAAK;AAAA,MACL,cAAc;AAAA,MACd,MAAM,CAAC,kBAAkB,MAAM;AAAA,IAAA,CAChC;AACD,WAAO;AAAA,MACL,IAAI;AAAA,MACJ,MAAM;AAAA,IAAA;AAAA,EAEV,SAAS,OAAO;AACd,UAAM,UAAU,iBAAiB,QAAQ,MAAM,UAAU,OAAO,KAAK;AACrE,WAAO;AAAA,MACL,MAAM;AAAA;AAAA,MACN,OAAO;AAAA,MACP,SAAS;AAAA,IAAA;AAAA,EAEb;AACF;"}