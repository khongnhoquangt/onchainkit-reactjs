{"version":3,"file":"DropdownMenu.js","sources":["../../../src/internal/components/DropdownMenu.tsx"],"sourcesContent":["import { useTheme } from '@/internal/hooks/useTheme';\nimport { getHorizontalPosition } from '@/internal/utils/getHorizontalPosition';\nimport { zIndex } from '@/styles/constants';\nimport { cn } from '@/styles/theme';\nimport type React from 'react';\nimport { useCallback, useEffect, useRef } from 'react';\nimport { createPortal } from 'react-dom';\nimport { DismissableLayer } from './DismissableLayer';\nimport { FocusTrap } from './FocusTrap';\n\ntype DropdownMenuProps = {\n  /** Determines how the menu aligns with the trigger element */\n  align?: 'start' | 'center' | 'end';\n  /** Content of the dropdown menu */\n  children: React.ReactNode;\n  isOpen?: boolean;\n  /** Space between the trigger and menu in pixels */\n  offset?: number;\n  /** Callback for when the dropdown should close */\n  onClose?: () => void;\n  /** The element that triggers the dropdown menu */\n  trigger: React.RefObject<HTMLElement>;\n  'aria-label'?: string;\n};\n\n/**\n * DropdownMenu primitive that handles:\n * - Menu positioning relative to trigger\n * - Focus management\n * - Click outside and escape key dismissal\n * - Keyboard navigation\n * - Proper ARIA attributes for accessibility\n */\nexport function DropdownMenu({\n  align = 'start',\n  children,\n  isOpen,\n  offset = 8,\n  onClose,\n  trigger,\n  'aria-label': ariaLabel,\n}: DropdownMenuProps) {\n  const componentTheme = useTheme();\n  const contentRef = useRef<HTMLDivElement>(null);\n\n  const updatePosition = useCallback(() => {\n    if (!trigger?.current || !contentRef.current) {\n      return;\n    }\n\n    const triggerRect = trigger.current.getBoundingClientRect();\n    const menuRect = contentRef.current.getBoundingClientRect();\n\n    if (!triggerRect || !menuRect) {\n      return;\n    }\n\n    const left = getHorizontalPosition({\n      triggerRect,\n      contentRect: menuRect,\n      align,\n    });\n\n    contentRef.current.style.top = `${triggerRect.bottom + offset}px`;\n    contentRef.current.style.left = `${left}px`;\n  }, [trigger, offset, align]);\n\n  useEffect(() => {\n    if (!isOpen) {\n      return;\n    }\n\n    updatePosition();\n    window.addEventListener('resize', updatePosition);\n    window.addEventListener('scroll', updatePosition);\n\n    return () => {\n      window.removeEventListener('resize', updatePosition);\n      window.removeEventListener('scroll', updatePosition);\n    };\n  }, [isOpen, updatePosition]);\n\n  if (!isOpen) {\n    return null;\n  }\n\n  const dropdownMenu = (\n    <div\n      className={cn(\n        componentTheme,\n        zIndex.dropdown,\n        'pointer-events-none fixed',\n      )}\n      data-portal-origin=\"true\"\n    >\n      <FocusTrap active={isOpen}>\n        <DismissableLayer onDismiss={onClose} triggerRef={trigger}>\n          <div\n            ref={contentRef}\n            className={cn('pointer-events-auto fixed')}\n            role=\"listbox\"\n            data-testid=\"ockDropdownMenu\"\n            aria-label={ariaLabel}\n          >\n            {children}\n          </div>\n        </DismissableLayer>\n      </FocusTrap>\n    </div>\n  );\n\n  return createPortal(dropdownMenu, document.body);\n}\n"],"names":[],"mappings":";;;;;;;;;AAiCO,SAAS,aAAa;AAAA,EAC3B,QAAQ;AAAA,EACR;AAAA,EACA;AAAA,EACA,SAAS;AAAA,EACT;AAAA,EACA;AAAA,EACA,cAAc;AAChB,GAAsB;AACpB,QAAM,iBAAiB,SAAA;AACvB,QAAM,aAAa,OAAuB,IAAI;AAE9C,QAAM,iBAAiB,YAAY,MAAM;AACvC,QAAI,EAAC,mCAAS,YAAW,CAAC,WAAW,SAAS;AAC5C;AAAA,IACF;AAEA,UAAM,cAAc,QAAQ,QAAQ,sBAAA;AACpC,UAAM,WAAW,WAAW,QAAQ,sBAAA;AAEpC,QAAI,CAAC,eAAe,CAAC,UAAU;AAC7B;AAAA,IACF;AAEA,UAAM,OAAO,sBAAsB;AAAA,MACjC;AAAA,MACA,aAAa;AAAA,MACb;AAAA,IAAA,CACD;AAED,eAAW,QAAQ,MAAM,MAAM,GAAG,YAAY,SAAS,MAAM;AAC7D,eAAW,QAAQ,MAAM,OAAO,GAAG,IAAI;AAAA,EACzC,GAAG,CAAC,SAAS,QAAQ,KAAK,CAAC;AAE3B,YAAU,MAAM;AACd,QAAI,CAAC,QAAQ;AACX;AAAA,IACF;AAEA,mBAAA;AACA,WAAO,iBAAiB,UAAU,cAAc;AAChD,WAAO,iBAAiB,UAAU,cAAc;AAEhD,WAAO,MAAM;AACX,aAAO,oBAAoB,UAAU,cAAc;AACnD,aAAO,oBAAoB,UAAU,cAAc;AAAA,IACrD;AAAA,EACF,GAAG,CAAC,QAAQ,cAAc,CAAC;AAE3B,MAAI,CAAC,QAAQ;AACX,WAAO;AAAA,EACT;AAEA,QAAM,eACJ;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,WAAW;AAAA,QACT;AAAA,QACA,OAAO;AAAA,QACP;AAAA,MAAA;AAAA,MAEF,sBAAmB;AAAA,MAEnB,UAAA,uBAAC,aAAU,QAAQ,QACjB,iCAAC,kBAAA,EAAiB,WAAW,SAAS,YAAY,SAChD,UAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,KAAK;AAAA,UACL,WAAW,GAAG,2BAA2B;AAAA,UACzC,MAAK;AAAA,UACL,eAAY;AAAA,UACZ,cAAY;AAAA,UAEX;AAAA,QAAA;AAAA,QAPH;AAAA,QAAA;AAAA,QAAA;AAAA,UAAA,UAAA;AAAA,UAAA,YAAA;AAAA,UAAA,cAAA;AAAA,QAAA;AAAA,QAAA;AAAA,MAAA,EAQA,GATF,QAAA,OAAA;AAAA,QAAA,UAAA;AAAA,QAAA,YAAA;AAAA,QAAA,cAAA;AAAA,MAAA,GAAA,IAUA,EAAA,GAXF,QAAA,OAAA;AAAA,QAAA,UAAA;AAAA,QAAA,YAAA;AAAA,QAAA,cAAA;AAAA,MAAA,GAAA,IAYA;AAAA,IAAA;AAAA,IApBF;AAAA,IAAA;AAAA,IAAA;AAAA,MAAA,UAAA;AAAA,MAAA,YAAA;AAAA,MAAA,cAAA;AAAA,IAAA;AAAA,IAAA;AAAA,EAAA;AAwBF,SAAO,aAAa,cAAc,SAAS,IAAI;AACjD;"}