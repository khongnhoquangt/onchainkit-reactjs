{"version":3,"file":"NFTVideo.js","sources":["../../../../src/nft/components/view/NFTVideo.tsx"],"sourcesContent":["import type { NFTError } from '@/api/types';\nimport { useNFTContext } from '@/nft/components/NFTProvider';\nimport { useCallback, useEffect, useRef } from 'react';\nimport { defaultNFTSvg } from '../../../internal/svg/defaultNFTSvg';\nimport { cn } from '../../../styles/theme';\n\ntype NFTVideoReact = {\n  className?: string;\n  square?: boolean;\n  onLoading?: (mediaUrl: string) => void;\n  onLoaded?: () => void;\n  onError?: (error: NFTError) => void;\n};\n\nexport function NFTVideo({\n  className,\n  square = true,\n  onLoading,\n  onLoaded,\n  onError,\n}: NFTVideoReact) {\n  const { animationUrl, imageUrl } = useNFTContext();\n  const videoRef = useRef<HTMLVideoElement>(null);\n\n  useEffect(() => {\n    if (animationUrl && videoRef?.current) {\n      videoRef.current.onloadstart = () => {\n        onLoading?.(animationUrl);\n      };\n\n      videoRef.current.onloadeddata = () => {\n        onLoaded?.();\n      };\n\n      videoRef.current.onerror = (error: string | Event) => {\n        onError?.({\n          error: typeof error === 'string' ? error : error.type,\n          code: 'NmNVc01', // NFT module NFTVideo component 01 error\n          message: 'Error loading video',\n        });\n      };\n    }\n  }, [animationUrl, onLoading, onLoaded, onError]);\n\n  const handleClick = useCallback((e: React.MouseEvent<HTMLVideoElement>) => {\n    e.stopPropagation();\n  }, []);\n\n  if (!animationUrl) {\n    return <div className=\"max-h-350 w-350 max-w-350\">{defaultNFTSvg}</div>;\n  }\n\n  return (\n    <div\n      className={cn(\n        'grid w-full',\n        '[&>*]:col-start-1 [&>*]:col-end-1 [&>*]:row-start-1 [&>*]:row-end-1',\n        { 'content-center justify-center': !square },\n        { 'aspect-square': square },\n        className,\n      )}\n    >\n      <video\n        ref={videoRef}\n        data-testid=\"ockNFTVideo\"\n        onClick={handleClick}\n        className={cn({ 'h-full w-full object-cover aspect-square': square })}\n        poster={imageUrl}\n        controls={true}\n        loop={true}\n        src={animationUrl}\n        muted={true}\n        autoPlay={true}\n        playsInline={true}\n        draggable={false}\n        width=\"100%\"\n      />\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAcO,SAAS,SAAS;AAAA,EACvB;AAAA,EACA,SAAS;AAAA,EACT;AAAA,EACA;AAAA,EACA;AACF,GAAkB;AAChB,QAAM,EAAE,cAAc,SAAA,IAAa,cAAA;AACnC,QAAM,WAAW,OAAyB,IAAI;AAE9C,YAAU,MAAM;AACd,QAAI,iBAAgB,qCAAU,UAAS;AACrC,eAAS,QAAQ,cAAc,MAAM;AACnC,+CAAY;AAAA,MACd;AAEA,eAAS,QAAQ,eAAe,MAAM;AACpC;AAAA,MACF;AAEA,eAAS,QAAQ,UAAU,CAAC,UAA0B;AACpD,2CAAU;AAAA,UACR,OAAO,OAAO,UAAU,WAAW,QAAQ,MAAM;AAAA,UACjD,MAAM;AAAA;AAAA,UACN,SAAS;AAAA,QAAA;AAAA,MAEb;AAAA,IACF;AAAA,EACF,GAAG,CAAC,cAAc,WAAW,UAAU,OAAO,CAAC;AAE/C,QAAM,cAAc,YAAY,CAAC,MAA0C;AACzE,MAAE,gBAAA;AAAA,EACJ,GAAG,CAAA,CAAE;AAEL,MAAI,CAAC,cAAc;AACjB,WAAO,uBAAC,OAAA,EAAI,WAAU,6BAA6B,UAAA,cAAA,GAA5C,QAAA,OAAA;AAAA,MAAA,UAAA;AAAA,MAAA,YAAA;AAAA,MAAA,cAAA;AAAA,IAAA,GAAA,IAA0D;AAAA,EACnE;AAEA,SACE;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,WAAW;AAAA,QACT;AAAA,QACA;AAAA,QACA,EAAE,iCAAiC,CAAC,OAAA;AAAA,QACpC,EAAE,iBAAiB,OAAA;AAAA,QACnB;AAAA,MAAA;AAAA,MAGF,UAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,KAAK;AAAA,UACL,eAAY;AAAA,UACZ,SAAS;AAAA,UACT,WAAW,GAAG,EAAE,4CAA4C,QAAQ;AAAA,UACpE,QAAQ;AAAA,UACR,UAAU;AAAA,UACV,MAAM;AAAA,UACN,KAAK;AAAA,UACL,OAAO;AAAA,UACP,UAAU;AAAA,UACV,aAAa;AAAA,UACb,WAAW;AAAA,UACX,OAAM;AAAA,QAAA;AAAA,QAbR;AAAA,QAAA;AAAA,QAAA;AAAA,UAAA,UAAA;AAAA,UAAA,YAAA;AAAA,UAAA,cAAA;AAAA,QAAA;AAAA,QAAA;AAAA,MAAA;AAAA,IAcA;AAAA,IAvBF;AAAA,IAAA;AAAA,IAAA;AAAA,MAAA,UAAA;AAAA,MAAA,YAAA;AAAA,MAAA,cAAA;AAAA,IAAA;AAAA,IAAA;AAAA,EAAA;AA0BJ;"}