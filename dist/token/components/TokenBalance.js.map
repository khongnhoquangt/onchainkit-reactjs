{"version":3,"file":"TokenBalance.js","sources":["../../../src/token/components/TokenBalance.tsx"],"sourcesContent":["import { formatFiatAmount } from '@/internal/utils/formatFiatAmount';\nimport { truncateDecimalPlaces } from '@/internal/utils/truncateDecimalPlaces';\nimport { border, cn, color, text } from '@/styles/theme';\nimport { TokenImage } from '@/token/components/TokenImage';\nimport { useMemo } from 'react';\nimport { formatUnits } from 'viem';\nimport type { TokenBalanceProps } from '../types';\n\nexport function TokenBalance({\n  token,\n  onClick,\n  onActionPress,\n  actionText = 'Max',\n  classNames,\n  'aria-label': ariaLabel,\n  ...contentProps\n}: TokenBalanceProps) {\n  if (onClick) {\n    return (\n      <div className=\"relative\">\n        <button\n          type=\"button\"\n          aria-label={ariaLabel ?? `${token.name} token balance`}\n          onClick={() => onClick(token)}\n          className={cn(\n            'flex w-full items-center justify-start gap-4 px-2 py-1',\n            classNames?.container,\n          )}\n          data-testid=\"ockTokenBalanceButton\"\n        >\n          <TokenBalanceContent\n            token={token}\n            classNames={classNames}\n            onActionPress={onActionPress}\n            {...contentProps}\n          />\n        </button>\n        {onActionPress && (\n          <ActionButton\n            actionText={actionText}\n            onActionPress={onActionPress}\n            className={classNames?.action}\n          />\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={cn(\n        'flex w-full items-center justify-start gap-4 px-2 py-1',\n        classNames?.container,\n      )}\n      data-testid=\"ockTokenBalance\"\n    >\n      <TokenBalanceContent\n        token={token}\n        {...contentProps}\n        classNames={classNames}\n      />\n      {onActionPress && (\n        <ActionButton\n          actionText={actionText}\n          onActionPress={onActionPress}\n          className={classNames?.action}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction TokenBalanceContent({\n  token,\n  subtitle,\n  showImage = true,\n  onActionPress,\n  tokenSize = 40,\n  classNames,\n}: TokenBalanceProps) {\n  const formattedFiatValue = useMemo(\n    () =>\n      formatFiatAmount({\n        amount: token.fiatBalance,\n        currency: 'USD',\n      }),\n    [token.fiatBalance],\n  );\n\n  const formattedCryptoValue = useMemo(\n    () =>\n      truncateDecimalPlaces(\n        formatUnits(BigInt(token.cryptoBalance), token.decimals),\n        3,\n      ),\n    [token.cryptoBalance, token.decimals],\n  );\n\n  return (\n    <div className=\"grid w-full grid-cols-[2.5rem_1fr_auto] items-center gap-3\">\n      <div className=\"h-10 w-10\">\n        {showImage && <TokenImage token={token} size={tokenSize} />}\n      </div>\n      <div className=\"flex min-w-0 flex-col text-left\">\n        <span\n          className={cn(\n            text.headline,\n            color.foreground,\n            'overflow-hidden text-ellipsis whitespace-nowrap',\n            classNames?.tokenName,\n          )}\n        >\n          {token.name?.trim()}\n        </span>\n        <span\n          className={cn(\n            text.label2,\n            color.foregroundMuted,\n            classNames?.tokenValue,\n          )}\n        >\n          {`${formattedCryptoValue} ${token.symbol} ${subtitle ?? ''}`}\n        </span>\n      </div>\n      <div className=\"text-right\">\n        {!onActionPress && (\n          <span\n            className={cn(\n              text.label2,\n              color.foregroundMuted,\n              'whitespace-nowrap',\n              classNames?.fiatValue,\n            )}\n          >\n            {formattedFiatValue}\n          </span>\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction ActionButton({\n  actionText,\n  onActionPress,\n  className,\n}: Pick<TokenBalanceProps, 'actionText' | 'onActionPress'> & {\n  className?: string;\n}) {\n  return (\n    <button\n      type=\"button\"\n      data-testid=\"ockTokenBalanceAction\"\n      aria-label={actionText}\n      onClick={onActionPress}\n      className={cn(\n        text.label2,\n        color.primary,\n        border.radius,\n        'cursor-pointer p-0.5 font-bold',\n        'border border-transparent hover:border-[--ock-line-primary]',\n        '-translate-y-1/2 absolute top-1/2 right-2',\n        className,\n      )}\n    >\n      {actionText}\n    </button>\n  );\n}\n"],"names":[],"mappings":"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"}