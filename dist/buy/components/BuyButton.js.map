{"version":3,"file":"BuyButton.js","sources":["../../../src/buy/components/BuyButton.tsx"],"sourcesContent":["'use client';\nimport { useCallback, useMemo } from 'react';\nimport { Spinner } from '../../internal/components/Spinner';\nimport { checkmarkSvg } from '../../internal/svg/checkmarkSvg';\nimport { CloseSvg } from '../../internal/svg/closeSvg';\nimport {\n  background,\n  border,\n  cn,\n  color,\n  icon,\n  pressable,\n  text,\n} from '../../styles/theme';\nimport { ConnectWallet } from '../../wallet';\nimport { useBuyContext } from './BuyProvider';\n\nexport function BuyButton() {\n  const {\n    address,\n    disabled,\n    setIsDropdownOpen,\n    isDropdownOpen,\n    from,\n    fromETH,\n    fromUSDC,\n    to,\n    lifecycleStatus: { statusName },\n    updateLifecycleStatus,\n  } = useBuyContext();\n\n  const isLoading =\n    to?.loading ||\n    from?.loading ||\n    fromETH?.loading ||\n    fromUSDC?.loading ||\n    statusName === 'transactionPending' ||\n    statusName === 'transactionApproved';\n\n  const isMissingRequiredField = !to?.amount || !to?.token;\n  const isDisabled = isLoading || disabled;\n\n  const handleSubmit = useCallback(() => {\n    if (isMissingRequiredField) {\n      updateLifecycleStatus({\n        statusName: 'error',\n        statusData: {\n          code: 'TmBPc05',\n          error: 'Missing required fields',\n          message: 'Complete the field to continue',\n        },\n      });\n      return;\n    }\n    if (isDropdownOpen) {\n      setIsDropdownOpen(false);\n      return;\n    }\n    if (!isDropdownOpen) {\n      setIsDropdownOpen(true);\n    }\n  }, [\n    isMissingRequiredField,\n    setIsDropdownOpen,\n    isDropdownOpen,\n    updateLifecycleStatus,\n  ]);\n\n  const buttonContent = useMemo(() => {\n    if (statusName === 'success') {\n      return checkmarkSvg;\n    }\n    if (isDropdownOpen) {\n      return <CloseSvg className={icon.inverse} />;\n    }\n    return 'Buy';\n  }, [statusName, isDropdownOpen]);\n\n  if (!isDisabled && !address) {\n    return <ConnectWallet text=\"Buy\" className=\"h-12 w-24 min-w-24\" />;\n  }\n\n  return (\n    <button\n      type=\"button\"\n      className={cn(\n        background.primary,\n        border.radius,\n        'flex rounded-xl',\n        'h-12 w-24 items-center justify-center px-4 py-3',\n        isDisabled && pressable.disabled,\n        text.headline,\n      )}\n      onClick={handleSubmit}\n      data-testid=\"ockBuyButton_Button\"\n      disabled={isDisabled}\n    >\n      {isLoading ? (\n        <Spinner />\n      ) : (\n        <span className={cn(text.headline, color.inverse)}>\n          {buttonContent}\n        </span>\n      )}\n    </button>\n  );\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiBO,SAAS,YAAY;AAC1B,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,iBAAiB,EAAE,WAAA;AAAA,IACnB;AAAA,EAAA,IACE,cAAA;AAEJ,QAAM,aACJ,yBAAI,aACJ,6BAAM,aACN,mCAAS,aACT,qCAAU,YACV,eAAe,wBACf,eAAe;AAEjB,QAAM,yBAAyB,EAAC,yBAAI,WAAU,EAAC,yBAAI;AACnD,QAAM,aAAa,aAAa;AAEhC,QAAM,eAAe,YAAY,MAAM;AACrC,QAAI,wBAAwB;AAC1B,4BAAsB;AAAA,QACpB,YAAY;AAAA,QACZ,YAAY;AAAA,UACV,MAAM;AAAA,UACN,OAAO;AAAA,UACP,SAAS;AAAA,QAAA;AAAA,MACX,CACD;AACD;AAAA,IACF;AACA,QAAI,gBAAgB;AAClB,wBAAkB,KAAK;AACvB;AAAA,IACF;AACA,QAAI,CAAC,gBAAgB;AACnB,wBAAkB,IAAI;AAAA,IACxB;AAAA,EACF,GAAG;AAAA,IACD;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EAAA,CACD;AAED,QAAM,gBAAgB,QAAQ,MAAM;AAClC,QAAI,eAAe,WAAW;AAC5B,aAAO;AAAA,IACT;AACA,QAAI,gBAAgB;AAClB,aAAO,uBAAC,UAAA,EAAS,WAAW,KAAK,QAAA,GAA1B,QAAA,OAAA;AAAA,QAAA,UAAA;AAAA,QAAA,YAAA;AAAA,QAAA,cAAA;AAAA,MAAA,GAAA,IAAmC;AAAA,IAC5C;AACA,WAAO;AAAA,EACT,GAAG,CAAC,YAAY,cAAc,CAAC;AAE/B,MAAI,CAAC,cAAc,CAAC,SAAS;AAC3B,WAAO,uBAAC,eAAA,EAAc,MAAK,OAAM,WAAU,qBAAA,GAApC,QAAA,OAAA;AAAA,MAAA,UAAA;AAAA,MAAA,YAAA;AAAA,MAAA,cAAA;AAAA,IAAA,GAAA,IAAyD;AAAA,EAClE;AAEA,SACE;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,MAAK;AAAA,MACL,WAAW;AAAA,QACT,WAAW;AAAA,QACX,OAAO;AAAA,QACP;AAAA,QACA;AAAA,QACA,cAAc,UAAU;AAAA,QACxB,KAAK;AAAA,MAAA;AAAA,MAEP,SAAS;AAAA,MACT,eAAY;AAAA,MACZ,UAAU;AAAA,MAET,UAAA,mCACE,SAAA,CAAA,GAAD,QAAA,OAAA;AAAA,QAAA,UAAA;AAAA,QAAA,YAAA;AAAA,QAAA,cAAA;AAAA,MAAA,GAAA,IAAS,IAET,uBAAC,QAAA,EAAK,WAAW,GAAG,KAAK,UAAU,MAAM,OAAO,GAC7C,UAAA,cAAA,GADH,QAAA,OAAA;AAAA,QAAA,UAAA;AAAA,QAAA,YAAA;AAAA,QAAA,cAAA;AAAA,MAAA,GAAA,IAEA;AAAA,IAAA;AAAA,IAnBJ;AAAA,IAAA;AAAA,IAAA;AAAA,MAAA,UAAA;AAAA,MAAA,YAAA;AAAA,MAAA,cAAA;AAAA,IAAA;AAAA,IAAA;AAAA,EAAA;AAuBJ;"}