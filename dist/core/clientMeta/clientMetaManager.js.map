{"version":3,"file":"clientMetaManager.js","sources":["../../../src/core/clientMeta/clientMetaManager.ts"],"sourcesContent":["import sdk from '@farcaster/frame-sdk';\n\nexport type ClientMeta = {\n  mode: 'onchainkit' | 'minikit';\n  clientFid: number | null;\n};\n\nclass ClientMetaManager {\n  public clientMeta: ClientMeta | null = null;\n\n  private initPromise: Promise<ClientMeta> | null = null;\n\n  public async init({ isMiniKit }: { isMiniKit: boolean }) {\n    if (this.isInitialized()) {\n      console.warn('ClientMetaManager already initialized');\n      return;\n    }\n\n    this.initPromise = this.handleInit({ isMiniKit });\n  }\n\n  public isInitialized() {\n    return !!this.initPromise;\n  }\n\n  public async getClientMeta() {\n    if (!this.initPromise) throw new Error('ClientMetaManager not initialized');\n    if (!this.clientMeta) return await this.initPromise;\n    return this.clientMeta;\n  }\n\n  private async handleInit({ isMiniKit }: { isMiniKit: boolean }) {\n    let clientFid: number | null = null;\n\n    try {\n      const context = await sdk.context;\n      clientFid = context?.client?.clientFid || null;\n    } catch (error) {\n      console.error('Error getting client FID', error);\n    }\n\n    this.clientMeta = {\n      mode: isMiniKit ? 'minikit' : 'onchainkit',\n      clientFid,\n    };\n\n    return this.clientMeta;\n  }\n}\n\nexport const clientMetaManager = new ClientMetaManager();\n"],"names":[],"mappings":";AAOA,MAAM,kBAAkB;AAAA,EAAxB,cAAA;AACE,SAAO,aAAgC;AAEvC,SAAQ,cAA0C;AAAA,EAAA;AAAA,EAElD,MAAa,KAAK,EAAE,aAAqC;AACvD,QAAI,KAAK,iBAAiB;AACxB,cAAQ,KAAK,uCAAuC;AACpD;AAAA,IACF;AAEA,SAAK,cAAc,KAAK,WAAW,EAAE,WAAW;AAAA,EAClD;AAAA,EAEO,gBAAgB;AACrB,WAAO,CAAC,CAAC,KAAK;AAAA,EAChB;AAAA,EAEA,MAAa,gBAAgB;AAC3B,QAAI,CAAC,KAAK,YAAa,OAAM,IAAI,MAAM,mCAAmC;AAC1E,QAAI,CAAC,KAAK,WAAY,QAAO,MAAM,KAAK;AACxC,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,MAAc,WAAW,EAAE,aAAqC;;AAC9D,QAAI,YAA2B;AAE/B,QAAI;AACF,YAAM,UAAU,MAAM,IAAI;AAC1B,oBAAY,wCAAS,WAAT,mBAAiB,cAAa;AAAA,IAC5C,SAAS,OAAO;AACd,cAAQ,MAAM,4BAA4B,KAAK;AAAA,IACjD;AAEA,SAAK,aAAa;AAAA,MAChB,MAAM,YAAY,YAAY;AAAA,MAC9B;AAAA,IAAA;AAGF,WAAO,KAAK;AAAA,EACd;AACF;AAEO,MAAM,oBAAoB,IAAI,kBAAA;"}