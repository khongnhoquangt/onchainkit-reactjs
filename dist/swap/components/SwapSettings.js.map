{"version":3,"file":"SwapSettings.js","sources":["../../../src/swap/components/SwapSettings.tsx"],"sourcesContent":["import { DismissableLayer } from '@/internal/components/DismissableLayer';\nimport { FocusTrap } from '@/internal/components/FocusTrap';\nimport { Popover } from '@/internal/components/Popover';\nimport { useBreakpoints } from '@/internal/hooks/useBreakpoints';\nimport { useIcon } from '@/internal/hooks/useIcon';\nimport { background, border, cn, pressable, text } from '@/styles/theme';\nimport { useCallback, useRef, useState } from 'react';\nimport type { SwapSettingsReact } from '../types';\nimport { SwapSettingsSlippageDescription } from './SwapSettingsSlippageDescription';\nimport { SwapSettingsSlippageInput } from './SwapSettingsSlippageInput';\nimport { SwapSettingsSlippageLayout } from './SwapSettingsSlippageLayout';\nimport { SwapSettingsSlippageLayoutBottomSheet } from './SwapSettingsSlippageLayoutBottomSheet';\nimport { SwapSettingsSlippageTitle } from './SwapSettingsSlippageTitle';\n\nconst DEFAULT_CHILDREN = (\n  <>\n    <SwapSettingsSlippageTitle>Max. slippage</SwapSettingsSlippageTitle>\n    <SwapSettingsSlippageDescription>\n      Your swap will revert if the prices change by more than the selected\n      percentage.\n    </SwapSettingsSlippageDescription>\n    <SwapSettingsSlippageInput />\n  </>\n);\n\nexport function SwapSettings({\n  children = DEFAULT_CHILDREN,\n  className,\n  icon = 'swapSettings',\n  text: buttonText = '',\n}: SwapSettingsReact) {\n  const breakpoint = useBreakpoints();\n  const [isOpen, setIsOpen] = useState(false);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n  const triggerRef = useRef<HTMLButtonElement>(null);\n\n  const handleToggle = useCallback((e: React.MouseEvent) => {\n    e.stopPropagation();\n    setIsOpen((prev) => !prev);\n  }, []);\n\n  const handleClose = useCallback(() => {\n    setIsOpen(false);\n  }, []);\n\n  const iconSvg = useIcon({ icon });\n\n  return (\n    <div\n      className={cn(\n        'flex w-auto items-center justify-end space-x-1 pb-4',\n        className,\n      )}\n      data-testid=\"ockSwapSettings_Settings\"\n    >\n      {buttonText && <span className={cn(text.body)}>{buttonText}</span>}\n      <div className={cn('relative', isOpen && 'group')} ref={dropdownRef}>\n        <button\n          ref={triggerRef}\n          type=\"button\"\n          aria-label=\"Toggle swap settings\"\n          className={cn(\n            pressable.default,\n            'rounded-full p-2 opacity-50 transition-opacity hover:opacity-100',\n          )}\n          onClick={handleToggle}\n        >\n          <div className=\"h-[1.125rem] w-[1.125rem]\">{iconSvg}</div>\n        </button>\n        {breakpoint === 'sm' ? (\n          <FocusTrap active={isOpen}>\n            <DismissableLayer\n              onDismiss={handleClose}\n              triggerRef={triggerRef}\n              preventTriggerEvents={true}\n            >\n              <div\n                className={cn(\n                  background.inverse,\n                  pressable.shadow,\n                  'fixed inset-x-0 z-50 transition-[bottom] duration-300 ease-in-out',\n                  isOpen ? 'bottom-0' : '-bottom-[12.875rem]',\n                  'h-[12.875rem] rounded-t-lg',\n                  className,\n                )}\n                data-testid=\"ockSwapSettingsSlippageLayoutBottomSheet_container\"\n              >\n                <SwapSettingsSlippageLayoutBottomSheet className={className}>\n                  {children}\n                </SwapSettingsSlippageLayoutBottomSheet>\n              </div>\n            </DismissableLayer>\n          </FocusTrap>\n        ) : (\n          <Popover\n            isOpen={isOpen}\n            onClose={handleClose}\n            anchor={dropdownRef.current}\n            position=\"bottom\"\n            align=\"end\"\n            trigger={triggerRef}\n          >\n            <div\n              className={cn(\n                border.radius,\n                background.default,\n                pressable.shadow,\n                'absolute right-0 z-10 mt-1 w-[21.75rem] rounded-lg',\n              )}\n              data-testid=\"ockSwapSettingsDropdown\"\n            >\n              <SwapSettingsSlippageLayout>\n                {children}\n              </SwapSettingsSlippageLayout>\n            </div>\n          </Popover>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":["this"],"mappings":"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"}