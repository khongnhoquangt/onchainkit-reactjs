{"version":3,"file":"PooledPipeline.cjs","sources":["../src/PooledPipeline.ts"],"sourcesContent":null,"names":["PooledPipeline","ParallelPipeline","constructor","args","resolver","results","running","blueprint","schemas","bool","number","concurrency","os","cpus","length","gte","filo","timeout","run","debug","work","onBeforeRun","emit","value","result","Promise","resolve","aggregateResult","all","slice","options","map","runWorkUnit","context","onAfterRun","unit","pop","shift","push","handleResult","filter","timer","setTimeout","PipelineError","onRunWorkUnit","then","clearTimeout","catch","error"],"mappings":"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"}