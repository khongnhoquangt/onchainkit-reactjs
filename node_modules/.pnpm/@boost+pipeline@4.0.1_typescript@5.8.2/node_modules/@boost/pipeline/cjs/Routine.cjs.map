{"version":3,"file":"Routine.cjs","sources":["../src/Routine.ts"],"sourcesContent":null,"names":["Routine","WorkUnit","constructor","key","title","options","context","value","execute","debug","onCommand","Event","onCommandData","monitorInstance","length","Array","isArray","PipelineError","toArray","map","kebabCase","join","createDebugger","executeCommand","command","args","wrap","workUnit","opts","stream","execa","emit","unit","handler","line","isRunning","statusText","stderr","pipe","split","on","stdout","createAggregatedPipeline","updateHierarchy","AggregatedPipeline","createConcurrentPipeline","ConcurrentPipeline","createPooledPipeline","PooledPipeline","createWaterfallPipeline","WaterfallPipeline","setMonitor","monitor","pipeline","depth","Pipeline"],"mappings":"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"}